<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>GtkIMContext</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.74.3">
<link rel="home" href="index.html" title="GTK+ Reference Manual">
<link rel="up" href="AbstractObjects.html" title="Abstract Base Classes">
<link rel="prev" href="GtkWidget.html" title="GtkWidget">
<link rel="next" href="PlugSocket.html" title="Cross-process Embedding">
<meta name="generator" content="GTK-Doc V1.11 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
<link rel="part" href="gtk.html" title="Part I. GTK+ Overview">
<link rel="part" href="gtkbase.html" title="Part II. GTK+ Core Reference">
<link rel="part" href="gtkobjects.html" title="Part III. GTK+ Widgets and Objects">
<link rel="chapter" href="ch01.html" title="Object Hierarchy">
<link rel="chapter" href="ch02.html" title="Widget Gallery">
<link rel="chapter" href="WindowWidgets.html" title="Windows">
<link rel="chapter" href="DisplayWidgets.html" title="Display Widgets">
<link rel="chapter" href="ButtonWidgets.html" title="Buttons and Toggles">
<link rel="chapter" href="NumericEntry.html" title="Numeric/Text Data Entry">
<link rel="chapter" href="TextWidgetObjects.html" title="Multiline Text Editor">
<link rel="chapter" href="TreeWidgetObjects.html" title="Tree, List and Icon Grid Widgets">
<link rel="chapter" href="MenusAndCombos.html" title="Menus, Combo Box, Toolbar">
<link rel="chapter" href="Actions.html" title="Action-based menus and toolbars">
<link rel="chapter" href="SelectorWidgets.html" title="Selectors (File/Font/Color/Input Devices)">
<link rel="chapter" href="LayoutContainers.html" title="Layout Containers">
<link rel="chapter" href="Ornaments.html" title="Ornaments">
<link rel="chapter" href="ScrollingWidgets.html" title="Scrolling">
<link rel="chapter" href="Printing.html" title="Printing">
<link rel="chapter" href="MiscObjects.html" title="Miscellaneous">
<link rel="chapter" href="AbstractObjects.html" title="Abstract Base Classes">
<link rel="chapter" href="PlugSocket.html" title="Cross-process Embedding">
<link rel="chapter" href="SpecialObjects.html" title="Special-purpose features">
<link rel="chapter" href="RecentDocuments.html" title="Recently Used Documents">
<link rel="chapter" href="Builder.html" title="Interface builder">
<link rel="chapter" href="DeprecatedObjects.html" title="Deprecated">
<link rel="part" href="migrating.html" title="Part IV. Migrating from Previous Versions of GTK+">
<link rel="chapter" href="gtk-migrating-checklist.html" title="Migration Checklist">
<link rel="chapter" href="gtk-migrating-GtkFileChooser.html" title="Migrating from GtkFileSelection to GtkFileChooser">
<link rel="chapter" href="gtk-migrating-GtkAction.html" title="Migrating from old menu and toolbar systems to GtkAction">
<link rel="chapter" href="gtk-migrating-GtkComboBox.html" title="Migrating from GtkOptionMenu and GtkCombo to GtkComboBox and GtkComboBoxEntry">
<link rel="chapter" href="gtk-migrating-GtkIconView.html" title="Migrating from GnomeIconList to GtkIconView">
<link rel="chapter" href="gtk-migrating-GtkAboutDialog.html" title="Migrating from GnomeAbout to GtkAboutDialog">
<link rel="chapter" href="gtk-migrating-GtkColorButton.html" title="Migrating from GnomeColorPicker to GtkColorButton">
<link rel="chapter" href="gtk-migrating-GtkAssistant.html" title="Migrating from GnomeDruid to GtkAssistant">
<link rel="chapter" href="gtk-migrating-GtkRecentChooser.html" title="Migrating from EggRecent to GtkRecentChooser">
<link rel="chapter" href="gtk-migrating-GtkLinkButton.html" title="Migrating from GnomeHRef to GtkLinkButton">
<link rel="chapter" href="gtk-migrating-GtkBuilder.html" title="Migrating from libglade to GtkBuilder">
<link rel="chapter" href="gtk-migrating-tooltips.html" title="Migrating from GtkTooltips to GtkTooltip">
<link rel="chapter" href="gtk-migrating-entry-icons.html" title="Migrating from SexyIconEntry to GtkEntry">
<link rel="part" href="pt05.html" title="Part V. GTK+ Tools">
<link rel="glossary" href="glossary.html" title="Glossary">
<link rel="index" href="api-index-full.html" title="Index of all symbols">
<link rel="index" href="api-index-deprecated.html" title="Index of deprecated symbols">
<link rel="index" href="api-index-2-2.html" title="Index of new symbols in 2.2">
<link rel="index" href="api-index-2-4.html" title="Index of new symbols in 2.4">
<link rel="index" href="api-index-2-6.html" title="Index of new symbols in 2.6">
<link rel="index" href="api-index-2-8.html" title="Index of new symbols in 2.8">
<link rel="index" href="api-index-2-10.html" title="Index of new symbols in 2.10">
<link rel="index" href="api-index-2-12.html" title="Index of new symbols in 2.12">
<link rel="index" href="api-index-2-14.html" title="Index of new symbols in 2.14">
<link rel="index" href="api-index-2-16.html" title="Index of new symbols in 2.16">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2">
<tr valign="middle">
<td><a accesskey="p" href="GtkWidget.html"><img src="left.png" width="24" height="24" border="0" alt="Prev"></a></td>
<td><a accesskey="u" href="AbstractObjects.html"><img src="up.png" width="24" height="24" border="0" alt="Up"></a></td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="24" height="24" border="0" alt="Home"></a></td>
<th width="100%" align="center">GTK+ Reference Manual</th>
<td><a accesskey="n" href="PlugSocket.html"><img src="right.png" width="24" height="24" border="0" alt="Next"></a></td>
</tr>
<tr><td colspan="5" class="shortcuts">
<a href="#GtkIMContext.synopsis" class="shortcut">Top</a>
                 | 
                <a href="#GtkIMContext.description" class="shortcut">Description</a>
                 | 
                <a href="#GtkIMContext.object-hierarchy" class="shortcut">Object Hierarchy</a>
                 | 
                <a href="#GtkIMContext.signals" class="shortcut">Signals</a>
</td></tr>
</table>
<div class="refentry" lang="en">
<a name="GtkIMContext"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle"><a name="GtkIMContext.top_of_page"></a>GtkIMContext</span></h2>
<p>GtkIMContext — Base class for input method contexts</p>
</td>
<td valign="top" align="right"></td>
</tr></table></div>
<div class="refsynopsisdiv">
<a name="GtkIMContext.synopsis"></a><h2>Synopsis</h2>
<pre class="synopsis">

#include &lt;gtk/gtk.h&gt;
#include &lt;gtk/gtkimmodule.h&gt;

                    <a class="link" href="GtkIMContext.html#GtkIMContext-struct" title="GtkIMContext">GtkIMContext</a>;
                    <a class="link" href="GtkIMContext.html#GtkIMContextClass" title="GtkIMContextClass">GtkIMContextClass</a>;
                    <a class="link" href="GtkIMContext.html#GtkIMContextInfo" title="GtkIMContextInfo">GtkIMContextInfo</a>;
void                <a class="link" href="GtkIMContext.html#gtk-im-context-set-client-window" title="gtk_im_context_set_client_window ()">gtk_im_context_set_client_window</a>    (<a class="link" href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context,
                                                         <a
href="http://library.gnome.org/devel/gdk/unstable/gdk-Windows.html#GdkWindow"
>GdkWindow</a> *window);
void                <a class="link" href="GtkIMContext.html#gtk-im-context-get-preedit-string" title="gtk_im_context_get_preedit_string ()">gtk_im_context_get_preedit_string</a>   (<a class="link" href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"
>gchar</a> **str,
                                                         <a
href="/usr/share/gtk-doc/html/pango/pango-Text-Attributes.html#PangoAttrList"
>PangoAttrList</a> **attrs,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gint"
>gint</a> *cursor_pos);
<a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gboolean"
>gboolean</a>            <a class="link" href="GtkIMContext.html#gtk-im-context-filter-keypress" title="gtk_im_context_filter_keypress ()">gtk_im_context_filter_keypress</a>      (<a class="link" href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context,
                                                         <a
href="http://library.gnome.org/devel/gdk/unstable/gdk-Event-Structures.html#GdkEventKey"
>GdkEventKey</a> *event);
void                <a class="link" href="GtkIMContext.html#gtk-im-context-focus-in" title="gtk_im_context_focus_in ()">gtk_im_context_focus_in</a>             (<a class="link" href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context);
void                <a class="link" href="GtkIMContext.html#gtk-im-context-focus-out" title="gtk_im_context_focus_out ()">gtk_im_context_focus_out</a>            (<a class="link" href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context);
void                <a class="link" href="GtkIMContext.html#gtk-im-context-reset" title="gtk_im_context_reset ()">gtk_im_context_reset</a>                (<a class="link" href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context);
void                <a class="link" href="GtkIMContext.html#gtk-im-context-set-cursor-location" title="gtk_im_context_set_cursor_location ()">gtk_im_context_set_cursor_location</a>  (<a class="link" href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context,
                                                         const <a
href="http://library.gnome.org/devel/gdk/unstable/gdk-Points-Rectangles-and-Regions.html#GdkRectangle"
>GdkRectangle</a> *area);
void                <a class="link" href="GtkIMContext.html#gtk-im-context-set-use-preedit" title="gtk_im_context_set_use_preedit ()">gtk_im_context_set_use_preedit</a>      (<a class="link" href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gboolean"
>gboolean</a> use_preedit);
void                <a class="link" href="GtkIMContext.html#gtk-im-context-set-surrounding" title="gtk_im_context_set_surrounding ()">gtk_im_context_set_surrounding</a>      (<a class="link" href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context,
                                                         const <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"
>gchar</a> *text,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gint"
>gint</a> len,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gint"
>gint</a> cursor_index);
<a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gboolean"
>gboolean</a>            <a class="link" href="GtkIMContext.html#gtk-im-context-get-surrounding" title="gtk_im_context_get_surrounding ()">gtk_im_context_get_surrounding</a>      (<a class="link" href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"
>gchar</a> **text,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gint"
>gint</a> *cursor_index);
<a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gboolean"
>gboolean</a>            <a class="link" href="GtkIMContext.html#gtk-im-context-delete-surrounding" title="gtk_im_context_delete_surrounding ()">gtk_im_context_delete_surrounding</a>   (<a class="link" href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gint"
>gint</a> offset,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gint"
>gint</a> n_chars);
</pre>
</div>
<div class="refsect1" lang="en">
<a name="GtkIMContext.object-hierarchy"></a><h2>Object Hierarchy</h2>
<pre class="synopsis">
  <a
href="http://library.gnome.org/devel/gobject/unstable/gobject-The-Base-Object-Type.html#GObject"
>GObject</a>
   +----GtkIMContext
         +----<a class="link" href="GtkIMContextSimple.html" title="GtkIMContextSimple">GtkIMContextSimple</a>
         +----<a class="link" href="GtkIMMulticontext.html" title="GtkIMMulticontext">GtkIMMulticontext</a>
</pre>
</div>
<div class="refsect1" lang="en">
<a name="GtkIMContext.signals"></a><h2>Signals</h2>
<pre class="synopsis">
  "<a class="link" href="GtkIMContext.html#GtkIMContext-commit" title='The "commit" signal'>commit</a>"                                         : Run Last
  "<a class="link" href="GtkIMContext.html#GtkIMContext-delete-surrounding" title='The "delete-surrounding" signal'>delete-surrounding</a>"                             : Run Last
  "<a class="link" href="GtkIMContext.html#GtkIMContext-preedit-changed" title='The "preedit-changed" signal'>preedit-changed</a>"                                : Run Last
  "<a class="link" href="GtkIMContext.html#GtkIMContext-preedit-end" title='The "preedit-end" signal'>preedit-end</a>"                                    : Run Last
  "<a class="link" href="GtkIMContext.html#GtkIMContext-preedit-start" title='The "preedit-start" signal'>preedit-start</a>"                                  : Run Last
  "<a class="link" href="GtkIMContext.html#GtkIMContext-retrieve-surrounding" title='The "retrieve-surrounding" signal'>retrieve-surrounding</a>"                           : Run Last
</pre>
</div>
<div class="refsect1" lang="en">
<a name="GtkIMContext.description"></a><h2>Description</h2>
<p>
<a class="link" href="GtkIMContext.html" title="GtkIMContext"><span class="type">GtkIMContext</span></a> defines the interface for GTK+ input methods. An input method
is used by GTK+ text input widgets like <a class="link" href="GtkEntry.html" title="GtkEntry"><span class="type">GtkEntry</span></a> to map from key events to
Unicode character strings.
</p>
<p>
The user may change the current input method via a context menu, unless the   
<a class="link" href="GtkSettings.html#GtkSettings--gtk-show-input-method-menu" title='The "gtk-show-input-method-menu" property'><span class="type">"gtk-show-input-method-menu"</span></a> GtkSettings property is set to FALSE. 
The default input method can be set programmatically via the 
<a class="link" href="GtkSettings.html#GtkSettings--gtk-im-module" title='The "gtk-im-module" property'><span class="type">"gtk-im-module"</span></a> GtkSettings property. Alternatively, you may set 
the GTK_IM_MODULE environment variable as documented in <a class="link" href="gtk-running.html" title="Running GTK+ Applications"><span class="type">gtk-running</span></a>.
</p>
<p>
The <a class="link" href="GtkEntry.html" title="GtkEntry"><span class="type">GtkEntry</span></a> <a class="link" href="GtkEntry.html#GtkEntry--im-module" title='The "im-module" property'><span class="type">"im-module"</span></a> and <a class="link" href="GtkTextView.html" title="GtkTextView"><span class="type">GtkTextView</span></a> <a class="link" href="GtkTextView.html#GtkTextView--im-module" title='The "im-module" property'><span class="type">"im-module"</span></a> 
properties may also be used to set input methods for specific widget 
instances. For instance, a certain entry widget might be expected to contain 
certain characters which would be easier to input with a certain input 
method.
</p>
<p>
An input method may consume multiple key events in sequence and finally
output the composed result. This is called preediting, and an input method
may provide feedback about this process by displaying the intermediate
composition states as preedit text. For instance, the default GTK+ input
method implements the input of arbitrary Unicode code points by holding down
the Control and Shift keys and then typing "U" followed by the hexadecimal
digits of the code point.  When releasing the Control and Shift keys,
preediting ends and the character is inserted as text. Ctrl+Shift+u20AC for
example results in the € sign.
</p>
<p>
Additional input methods can be made available for use by GTK+ widgets as
loadable modules. An input method module is a small shared library which
implements a subclass of <a class="link" href="GtkIMContext.html" title="GtkIMContext"><span class="type">GtkIMContext</span></a> or <a class="link" href="GtkIMContextSimple.html" title="GtkIMContextSimple"><span class="type">GtkIMContextSimple</span></a> and exports
these four functions:
</p>
<p>
</p>
<div class="informalexample"><pre class="programlisting">
void im_module_init(<a
href="http://library.gnome.org/devel/gobject/unstable/GTypeModule.html"
>GTypeModule</a> *module);
</pre></div>
<p>
This function should register the <a
href="http://library.gnome.org/devel/gobject/unstable/gobject-Type-Information.html#GType"
><span class="type">GType</span></a> of the <a class="link" href="GtkIMContext.html" title="GtkIMContext"><span class="type">GtkIMContext</span></a> subclass which
implements the input method by means of <a
href="http://library.gnome.org/devel/gobject/unstable/GTypeModule.html#g-type-module-register-type"
><code class="function">g_type_module_register_type()</code></a>. Note
that <a
href="http://library.gnome.org/devel/gobject/unstable/gobject-Type-Information.html#g-type-register-static"
><code class="function">g_type_register_static()</code></a> cannot be used as the type needs to be
registered dynamically.
</p>
<p>
</p>
<div class="informalexample"><pre class="programlisting">
void im_module_exit(void);
</pre></div>
<p>
Here goes any cleanup code your input method might require on module unload.
</p>
<p>
</p>
<div class="informalexample"><pre class="programlisting">
void im_module_list(const <a class="link" href="GtkIMContext.html#GtkIMContextInfo" title="GtkIMContextInfo">GtkIMContextInfo</a> ***contexts, int *n_contexts)
{
  *contexts = info_list;
  *n_contexts = G_N_ELEMENTS (info_list);
}
</pre></div>
<p>
This function returns the list of input methods provided by the module. The
example implementation above shows a common solution and simply returns a
pointer to statically defined array of <a class="link" href="GtkIMContext.html#GtkIMContextInfo" title="GtkIMContextInfo"><span class="type">GtkIMContextInfo</span></a> items for each
provided input method.
</p>
<p>
</p>
<div class="informalexample"><pre class="programlisting">
<a class="link" href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> * im_module_create(const <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"
>gchar</a> *context_id);
</pre></div>
<p>
This function should return a pointer to a newly created instance of the
<a class="link" href="GtkIMContext.html" title="GtkIMContext"><span class="type">GtkIMContext</span></a> subclass identified by <em class="parameter"><code>context_id</code></em>. The context ID is the same
as specified in the <a class="link" href="GtkIMContext.html#GtkIMContextInfo" title="GtkIMContextInfo"><span class="type">GtkIMContextInfo</span></a> array returned by <code class="function">im_module_list()</code>.
</p>
<p>
After a new loadable input method module has been installed on the system,
the configuration file <code class="filename">gtk.immodules</code> needs to be
regenerated by <a class="link" href="gtk-query-immodules-2.0.html" title="gtk-query-immodules-2.0">gtk-query-immodules-2.0</a>,
in order for the new input method to become available to GTK+ applications.</p>
<p>
</p>
</div>
<div class="refsect1" lang="en">
<a name="GtkIMContext.details"></a><h2>Details</h2>
<div class="refsect2" lang="en">
<a name="GtkIMContext-struct"></a><h3>GtkIMContext</h3>
<pre class="programlisting">typedef struct _GtkIMContext GtkIMContext;</pre>
<p>
</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="GtkIMContextClass"></a><h3>GtkIMContextClass</h3>
<pre class="programlisting">typedef struct {
  /* Signals */
  void     (*preedit_start)        (GtkIMContext *context);
  void     (*preedit_end)          (GtkIMContext *context);
  void     (*preedit_changed)      (GtkIMContext *context);
  void     (*commit)               (GtkIMContext *context, const gchar *str);
  gboolean (*retrieve_surrounding) (GtkIMContext *context);
  gboolean (*delete_surrounding)   (GtkIMContext *context,
				    gint          offset,
				    gint          n_chars);

  /* Virtual functions */
  void     (*set_client_window)   (GtkIMContext   *context,
				   GdkWindow      *window);
  void     (*get_preedit_string)  (GtkIMContext   *context,
				   gchar         **str,
				   PangoAttrList **attrs,
				   gint           *cursor_pos);
  gboolean (*filter_keypress)     (GtkIMContext   *context,
			           GdkEventKey    *event);
  void     (*focus_in)            (GtkIMContext   *context);
  void     (*focus_out)           (GtkIMContext   *context);
  void     (*reset)               (GtkIMContext   *context);
  void     (*set_cursor_location) (GtkIMContext   *context,
				   GdkRectangle   *area);
  void     (*set_use_preedit)     (GtkIMContext   *context,
				   gboolean        use_preedit);
  void     (*set_surrounding)     (GtkIMContext   *context,
				   const gchar    *text,
				   gint            len,
				   gint            cursor_index);
  gboolean (*get_surrounding)     (GtkIMContext   *context,
				   gchar         **text,
				   gint           *cursor_index);
} GtkIMContextClass;
</pre>
<p>
</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="structfield"><code>preedit_start</code></em> ()</span></p></td>
<td> Default handler of the <a class="link" href="GtkIMContext.html#GtkIMContext-preedit-start" title='The "preedit-start" signal'><span class="type">"preedit-start"</span></a> signal.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code>preedit_end</code></em> ()</span></p></td>
<td> Default handler of the <a class="link" href="GtkIMContext.html#GtkIMContext-preedit-end" title='The "preedit-end" signal'><span class="type">"preedit-end"</span></a> signal.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code>preedit_changed</code></em> ()</span></p></td>
<td> Default handler of the <a class="link" href="GtkIMContext.html#GtkIMContext-preedit-changed" title='The "preedit-changed" signal'><span class="type">"preedit-changed"</span></a>
  signal.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code>commit</code></em> ()</span></p></td>
<td> Default handler of the <a class="link" href="GtkIMContext.html#GtkIMContext-commit" title='The "commit" signal'><span class="type">"commit"</span></a> signal.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code>retrieve_surrounding</code></em> ()</span></p></td>
<td> Default handler of the
  <a class="link" href="GtkIMContext.html#GtkIMContext-retrieve-surrounding" title='The "retrieve-surrounding" signal'><span class="type">"retrieve-surrounding"</span></a> signal.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code>delete_surrounding</code></em> ()</span></p></td>
<td> Default handler of the
  <a class="link" href="GtkIMContext.html#GtkIMContext-delete-surrounding" title='The "delete-surrounding" signal'><span class="type">"delete-surrounding"</span></a> signal.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code>set_client_window</code></em> ()</span></p></td>
<td> Called via <a class="link" href="GtkIMContext.html#gtk-im-context-set-client-window" title="gtk_im_context_set_client_window ()"><code class="function">gtk_im_context_set_client_window()</code></a> when the
  input window where the entered text will appear changes. Override this to
  keep track of the current input window, for instance for the purpose of
  positioning a status display of your input method.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code>get_preedit_string</code></em> ()</span></p></td>
<td> Called via <a class="link" href="GtkIMContext.html#gtk-im-context-get-preedit-string" title="gtk_im_context_get_preedit_string ()"><code class="function">gtk_im_context_get_preedit_string()</code></a> to
  retrieve the text currently being preedited for display at the cursor
  position. Any input method which composes complex characters or any
  other compositions from multiple sequential key presses should override
  this method to provide feedback.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code>filter_keypress</code></em> ()</span></p></td>
<td> Called via <a class="link" href="GtkIMContext.html#gtk-im-context-filter-keypress" title="gtk_im_context_filter_keypress ()"><code class="function">gtk_im_context_filter_keypress()</code></a> on every
  key press or release event. Every non-trivial input method needs to
  override this in order to implement the mapping from key events to text.
  A return value of <a
href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE--CAPS"
><code class="literal">TRUE</code></a> indicates to the caller that the event was
  consumed by the input method. In that case, the <a class="link" href="GtkIMContext.html#GtkIMContext-commit" title='The "commit" signal'><span class="type">"commit"</span></a>
  signal should be emitted upon completion of a key sequence to pass the
  resulting text back to the input widget. Alternatively, <a
href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#FALSE--CAPS"
><code class="literal">FALSE</code></a> may be
  returned to indicate that the event wasn't handled by the input method.
  If a builtin mapping exists for the key, it is used to produce a
  character.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code>focus_in</code></em> ()</span></p></td>
<td> Called via <a class="link" href="GtkIMContext.html#gtk-im-context-focus-in" title="gtk_im_context_focus_in ()"><code class="function">gtk_im_context_focus_in()</code></a> when the input widget
  has gained focus. May be overridden to keep track of the current focus.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code>focus_out</code></em> ()</span></p></td>
<td> Called via <a class="link" href="GtkIMContext.html#gtk-im-context-focus-in" title="gtk_im_context_focus_in ()"><code class="function">gtk_im_context_focus_in()</code></a> when the input widget
  has lost focus. May be overridden to keep track of the current focus.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code>reset</code></em> ()</span></p></td>
<td> Called via <a class="link" href="GtkIMContext.html#gtk-im-context-reset" title="gtk_im_context_reset ()"><code class="function">gtk_im_context_reset()</code></a> to signal a change such as a
  change in cursor position. An input method that implements preediting
  should override this method to clear the preedit state on reset.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code>set_cursor_location</code></em> ()</span></p></td>
<td> Called via <a class="link" href="GtkIMContext.html#gtk-im-context-set-cursor-location" title="gtk_im_context_set_cursor_location ()"><code class="function">gtk_im_context_set_cursor_location()</code></a>
  to inform the input method of the current cursor location relative to
  the client window. May be overridden to implement the display of popup
  windows at the cursor position.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code>set_use_preedit</code></em> ()</span></p></td>
<td> Called via <a class="link" href="GtkIMContext.html#gtk-im-context-set-use-preedit" title="gtk_im_context_set_use_preedit ()"><code class="function">gtk_im_context_set_use_preedit()</code></a> to control
  the use of the preedit string. Override this to display feedback by some
  other means if turned off.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code>set_surrounding</code></em> ()</span></p></td>
<td> Called via <a class="link" href="GtkIMContext.html#gtk-im-context-set-surrounding" title="gtk_im_context_set_surrounding ()"><code class="function">gtk_im_context_set_surrounding()</code></a> in response
  to signal <a class="link" href="GtkIMContext.html#GtkIMContext-retrieve-surrounding" title='The "retrieve-surrounding" signal'><span class="type">"retrieve-surrounding"</span></a> to update the input
  method's idea of the context around the cursor. It is not necessary to
  override this method even with input methods which implement
  context-dependent behavior. The base implementation is sufficient for
  <a class="link" href="GtkIMContext.html#gtk-im-context-get-surrounding" title="gtk_im_context_get_surrounding ()"><code class="function">gtk_im_context_get_surrounding()</code></a> to work.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code>get_surrounding</code></em> ()</span></p></td>
<td> Called via <a class="link" href="GtkIMContext.html#gtk-im-context-get-surrounding" title="gtk_im_context_get_surrounding ()"><code class="function">gtk_im_context_get_surrounding()</code></a> to update
  the context around the cursor location. It is not necessary to override
  this method even with input methods which implement context-dependent
  behavior. The base implementation emits
  <a class="link" href="GtkIMContext.html#GtkIMContext-retrieve-surrounding" title='The "retrieve-surrounding" signal'><span class="type">"retrieve-surrounding"</span></a> and records the context received
  by the subsequent invocation of <em class="parameter"><code>get_surrounding</code></em>.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="GtkIMContextInfo"></a><h3>GtkIMContextInfo</h3>
<pre class="programlisting">typedef struct {
  const gchar *context_id;
  const gchar *context_name;
  const gchar *domain;
  const gchar *domain_dirname;
  const gchar *default_locales;
} GtkIMContextInfo;
</pre>
<p>
Bookkeeping information about a loadable input method.</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term">const <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"
>gchar</a> *<em class="structfield"><code>context_id</code></em>;</span></p></td>
<td> The unique identification string of the input method.
</td>
</tr>
<tr>
<td><p><span class="term">const <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"
>gchar</a> *<em class="structfield"><code>context_name</code></em>;</span></p></td>
<td> The human-readable name of the input method.
</td>
</tr>
<tr>
<td><p><span class="term">const <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"
>gchar</a> *<em class="structfield"><code>domain</code></em>;</span></p></td>
<td> Translation domain to be used with <a
href="/usr/share/gtk-doc/html/camel/camel-camel-i18n.html#dgettext"
><code class="function">dgettext()</code></a>
</td>
</tr>
<tr>
<td><p><span class="term">const <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"
>gchar</a> *<em class="structfield"><code>domain_dirname</code></em>;</span></p></td>
<td> Name of locale directory for use with <a
href="/usr/share/gtk-doc/html/camel/camel-camel-i18n.html#bindtextdomain"
><code class="function">bindtextdomain()</code></a>
</td>
</tr>
<tr>
<td><p><span class="term">const <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"
>gchar</a> *<em class="structfield"><code>default_locales</code></em>;</span></p></td>
<td> A colon-separated list of locales where this input method
  should be the default. The asterisk "*" sets the default for all locales.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="gtk-im-context-set-client-window"></a><h3>gtk_im_context_set_client_window ()</h3>
<pre class="programlisting">void                gtk_im_context_set_client_window    (<a class="link" href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context,
                                                         <a
href="http://library.gnome.org/devel/gdk/unstable/gdk-Windows.html#GdkWindow"
>GdkWindow</a> *window);</pre>
<p>
Set the client window for the input context; this is the
<a
href="http://library.gnome.org/devel/gdk/unstable/gdk-Windows.html#GdkWindow"
><span class="type">GdkWindow</span></a> in which the input appears. This window is
used in order to correctly position status windows, and may
also be used for purposes internal to the input method.</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>context</code></em> :</span></p></td>
<td> a <a class="link" href="GtkIMContext.html" title="GtkIMContext"><span class="type">GtkIMContext</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>window</code></em> :</span></p></td>
<td>  the client window. This may be <a
href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL--CAPS"
><code class="literal">NULL</code></a> to indicate
          that the previous client window no longer exists.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="gtk-im-context-get-preedit-string"></a><h3>gtk_im_context_get_preedit_string ()</h3>
<pre class="programlisting">void                gtk_im_context_get_preedit_string   (<a class="link" href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"
>gchar</a> **str,
                                                         <a
href="/usr/share/gtk-doc/html/pango/pango-Text-Attributes.html#PangoAttrList"
>PangoAttrList</a> **attrs,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gint"
>gint</a> *cursor_pos);</pre>
<p>
Retrieve the current preedit string for the input context,
and a list of attributes to apply to the string.
This string should be displayed inserted at the insertion
point.</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>context</code></em> :</span></p></td>
<td>    a <a class="link" href="GtkIMContext.html" title="GtkIMContext"><span class="type">GtkIMContext</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>str</code></em> :</span></p></td>
<td>        location to store the retrieved string. The
             string retrieved must be freed with <a
href="http://library.gnome.org/devel/glib/unstable/glib-Memory-Allocation.html#g-free"
><code class="function">g_free()</code></a>.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>attrs</code></em> :</span></p></td>
<td>      location to store the retrieved attribute list.
             When you are done with this list, you must
             unreference it with <a
href="/usr/share/gtk-doc/html/pango/pango-Text-Attributes.html#pango-attr-list-unref"
><code class="function">pango_attr_list_unref()</code></a>.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>cursor_pos</code></em> :</span></p></td>
<td> location to store position of cursor (in characters)
             within the preedit string.  
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="gtk-im-context-filter-keypress"></a><h3>gtk_im_context_filter_keypress ()</h3>
<pre class="programlisting"><a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gboolean"
>gboolean</a>            gtk_im_context_filter_keypress      (<a class="link" href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context,
                                                         <a
href="http://library.gnome.org/devel/gdk/unstable/gdk-Event-Structures.html#GdkEventKey"
>GdkEventKey</a> *event);</pre>
<p>
Allow an input method to internally handle key press and release 
events. If this function returns <a
href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE--CAPS"
><code class="literal">TRUE</code></a>, then no further processing
should be done for this key event.</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>context</code></em> :</span></p></td>
<td> a <a class="link" href="GtkIMContext.html" title="GtkIMContext"><span class="type">GtkIMContext</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>event</code></em> :</span></p></td>
<td> the key event
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> <a
href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE--CAPS"
><code class="literal">TRUE</code></a> if the input method handled the key event.

</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="gtk-im-context-focus-in"></a><h3>gtk_im_context_focus_in ()</h3>
<pre class="programlisting">void                gtk_im_context_focus_in             (<a class="link" href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context);</pre>
<p>
Notify the input method that the widget to which this
input context corresponds has gained focus. The input method
may, for example, change the displayed feedback to reflect
this change.</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><em class="parameter"><code>context</code></em> :</span></p></td>
<td> a <a class="link" href="GtkIMContext.html" title="GtkIMContext"><span class="type">GtkIMContext</span></a>
</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="gtk-im-context-focus-out"></a><h3>gtk_im_context_focus_out ()</h3>
<pre class="programlisting">void                gtk_im_context_focus_out            (<a class="link" href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context);</pre>
<p>
Notify the input method that the widget to which this
input context corresponds has lost focus. The input method
may, for example, change the displayed feedback or reset the contexts
state to reflect this change.</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><em class="parameter"><code>context</code></em> :</span></p></td>
<td> a <a class="link" href="GtkIMContext.html" title="GtkIMContext"><span class="type">GtkIMContext</span></a>
</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="gtk-im-context-reset"></a><h3>gtk_im_context_reset ()</h3>
<pre class="programlisting">void                gtk_im_context_reset                (<a class="link" href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context);</pre>
<p>
Notify the input method that a change such as a change in cursor
position has been made. This will typically cause the input
method to clear the preedit state.</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><em class="parameter"><code>context</code></em> :</span></p></td>
<td> a <a class="link" href="GtkIMContext.html" title="GtkIMContext"><span class="type">GtkIMContext</span></a>
</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="gtk-im-context-set-cursor-location"></a><h3>gtk_im_context_set_cursor_location ()</h3>
<pre class="programlisting">void                gtk_im_context_set_cursor_location  (<a class="link" href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context,
                                                         const <a
href="http://library.gnome.org/devel/gdk/unstable/gdk-Points-Rectangles-and-Regions.html#GdkRectangle"
>GdkRectangle</a> *area);</pre>
<p>
Notify the input method that a change in cursor 
position has been made. The location is relative to the client
window.</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>context</code></em> :</span></p></td>
<td> a <a class="link" href="GtkIMContext.html" title="GtkIMContext"><span class="type">GtkIMContext</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>area</code></em> :</span></p></td>
<td> new location
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="gtk-im-context-set-use-preedit"></a><h3>gtk_im_context_set_use_preedit ()</h3>
<pre class="programlisting">void                gtk_im_context_set_use_preedit      (<a class="link" href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gboolean"
>gboolean</a> use_preedit);</pre>
<p>
Sets whether the IM context should use the preedit string
to display feedback. If <em class="parameter"><code>use_preedit</code></em> is FALSE (default
is TRUE), then the IM context may use some other method to display
feedback, such as displaying it in a child of the root window.</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>context</code></em> :</span></p></td>
<td> a <a class="link" href="GtkIMContext.html" title="GtkIMContext"><span class="type">GtkIMContext</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>use_preedit</code></em> :</span></p></td>
<td> whether the IM context should use the preedit string.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="gtk-im-context-set-surrounding"></a><h3>gtk_im_context_set_surrounding ()</h3>
<pre class="programlisting">void                gtk_im_context_set_surrounding      (<a class="link" href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context,
                                                         const <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"
>gchar</a> *text,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gint"
>gint</a> len,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gint"
>gint</a> cursor_index);</pre>
<p>
Sets surrounding context around the insertion point and preedit
string. This function is expected to be called in response to the
GtkIMContext::retrieve_surrounding signal, and will likely have no
effect if called at other times.</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>context</code></em> :</span></p></td>
<td> a <a class="link" href="GtkIMContext.html" title="GtkIMContext"><span class="type">GtkIMContext</span></a> 
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>text</code></em> :</span></p></td>
<td> text surrounding the insertion point, as UTF-8.
       the preedit string should not be included within
       <em class="parameter"><code>text</code></em>.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>len</code></em> :</span></p></td>
<td> the length of <em class="parameter"><code>text</code></em>, or -1 if <em class="parameter"><code>text</code></em> is nul-terminated
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>cursor_index</code></em> :</span></p></td>
<td> the byte index of the insertion cursor within <em class="parameter"><code>text</code></em>.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="gtk-im-context-get-surrounding"></a><h3>gtk_im_context_get_surrounding ()</h3>
<pre class="programlisting"><a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gboolean"
>gboolean</a>            gtk_im_context_get_surrounding      (<a class="link" href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"
>gchar</a> **text,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gint"
>gint</a> *cursor_index);</pre>
<p>
Retrieves context around the insertion point. Input methods
typically want context in order to constrain input text based on
existing text; this is important for languages such as Thai where
only some sequences of characters are allowed.
</p>
<p>
This function is implemented by emitting the
GtkIMContext::retrieve_surrounding signal on the input method; in
response to this signal, a widget should provide as much context as
is available, up to an entire paragraph, by calling
<a class="link" href="GtkIMContext.html#gtk-im-context-set-surrounding" title="gtk_im_context_set_surrounding ()"><code class="function">gtk_im_context_set_surrounding()</code></a>. Note that there is no obligation
for a widget to respond to the ::retrieve_surrounding signal, so input
methods must be prepared to function without context.</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>context</code></em> :</span></p></td>
<td> a <a class="link" href="GtkIMContext.html" title="GtkIMContext"><span class="type">GtkIMContext</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>text</code></em> :</span></p></td>
<td> location to store a UTF-8 encoded string of text
       holding context around the insertion point.
       If the function returns <a
href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE--CAPS"
><code class="literal">TRUE</code></a>, then you must free
       the result stored in this location with <a
href="http://library.gnome.org/devel/glib/unstable/glib-Memory-Allocation.html#g-free"
><code class="function">g_free()</code></a>.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>cursor_index</code></em> :</span></p></td>
<td> location to store byte index of the insertion cursor
       within <em class="parameter"><code>text</code></em>.
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> <a
href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE--CAPS"
><code class="literal">TRUE</code></a> if surrounding text was provided; in this case
   you must free the result stored in *text.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="gtk-im-context-delete-surrounding"></a><h3>gtk_im_context_delete_surrounding ()</h3>
<pre class="programlisting"><a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gboolean"
>gboolean</a>            gtk_im_context_delete_surrounding   (<a class="link" href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gint"
>gint</a> offset,
                                                         <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gint"
>gint</a> n_chars);</pre>
<p>
Asks the widget that the input context is attached to to delete
characters around the cursor position by emitting the
GtkIMContext::delete_surrounding signal. Note that <em class="parameter"><code>offset</code></em> and <em class="parameter"><code>n_chars</code></em>
are in characters not in bytes which differs from the usage other
places in <a class="link" href="GtkIMContext.html" title="GtkIMContext"><span class="type">GtkIMContext</span></a>.
</p>
<p>
In order to use this function, you should first call
<a class="link" href="GtkIMContext.html#gtk-im-context-get-surrounding" title="gtk_im_context_get_surrounding ()"><code class="function">gtk_im_context_get_surrounding()</code></a> to get the current context, and
call this function immediately afterwards to make sure that you
know what you are deleting. You should also account for the fact
that even if the signal was handled, the input context might not
have deleted all the characters that were requested to be deleted.
</p>
<p>
This function is used by an input method that wants to make
subsitutions in the existing text in response to new input. It is
not useful for applications.</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>context</code></em> :</span></p></td>
<td> a <a class="link" href="GtkIMContext.html" title="GtkIMContext"><span class="type">GtkIMContext</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>offset</code></em> :</span></p></td>
<td> offset from cursor position in chars;
   a negative value means start before the cursor.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>n_chars</code></em> :</span></p></td>
<td> number of characters to delete.
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> <a
href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE--CAPS"
><code class="literal">TRUE</code></a> if the signal was handled.
</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div class="refsect1" lang="en">
<a name="GtkIMContext.signal-details"></a><h2>Signal Details</h2>
<div class="refsect2" lang="en">
<a name="GtkIMContext-commit"></a><h3>The <code class="literal">"commit"</code> signal</h3>
<pre class="programlisting">void                user_function                      (<a class="link" href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context,
                                                        <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"
>gchar</a>        *str,
                                                        <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gpointer"
>gpointer</a>      user_data)      : Run Last</pre>
<p>
The ::commit signal is emitted when a complete input sequence
has been entered by the user. This can be a single character
immediately after a key press or the final result of preediting.</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>context</code></em> :</span></p></td>
<td> the object on which the signal is emitted
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>str</code></em> :</span></p></td>
<td> the completed character(s) entered by the user
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>user_data</code></em> :</span></p></td>
<td>user data set when the signal handler was connected.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="GtkIMContext-delete-surrounding"></a><h3>The <code class="literal">"delete-surrounding"</code> signal</h3>
<pre class="programlisting"><a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gboolean"
>gboolean</a>            user_function                      (<a class="link" href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context,
                                                        <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gint"
>gint</a>          offset,
                                                        <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gint"
>gint</a>          n_chars,
                                                        <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gpointer"
>gpointer</a>      user_data)      : Run Last</pre>
<p>
The ::delete-surrounding signal is emitted when the input method
needs to delete all or part of the context surrounding the cursor.</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>context</code></em> :</span></p></td>
<td> the object on which the signal is emitted
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>offset</code></em> :</span></p></td>
<td>  the character offset from the cursor position of the text
          to be deleted. A negative value indicates a position before
          the cursor.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>n_chars</code></em> :</span></p></td>
<td> the number of characters to be deleted
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>user_data</code></em> :</span></p></td>
<td>user data set when the signal handler was connected.</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> <a
href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE--CAPS"
><code class="literal">TRUE</code></a> if the signal was handled.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="GtkIMContext-preedit-changed"></a><h3>The <code class="literal">"preedit-changed"</code> signal</h3>
<pre class="programlisting">void                user_function                      (<a class="link" href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context,
                                                        <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gpointer"
>gpointer</a>      user_data)      : Run Last</pre>
<p>
The ::preedit-changed signal is emitted whenever the preedit sequence
currently being entered has changed.  It is also emitted at the end of
a preedit sequence, in which case
<a class="link" href="GtkIMContext.html#gtk-im-context-get-preedit-string" title="gtk_im_context_get_preedit_string ()"><code class="function">gtk_im_context_get_preedit_string()</code></a> returns the empty string.</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>context</code></em> :</span></p></td>
<td> the object on which the signal is emitted
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>user_data</code></em> :</span></p></td>
<td>user data set when the signal handler was connected.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="GtkIMContext-preedit-end"></a><h3>The <code class="literal">"preedit-end"</code> signal</h3>
<pre class="programlisting">void                user_function                      (<a class="link" href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context,
                                                        <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gpointer"
>gpointer</a>      user_data)      : Run Last</pre>
<p>
The ::preedit-end signal is emitted when a preediting sequence
has been completed or canceled.</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>context</code></em> :</span></p></td>
<td> the object on which the signal is emitted
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>user_data</code></em> :</span></p></td>
<td>user data set when the signal handler was connected.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="GtkIMContext-preedit-start"></a><h3>The <code class="literal">"preedit-start"</code> signal</h3>
<pre class="programlisting">void                user_function                      (<a class="link" href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context,
                                                        <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gpointer"
>gpointer</a>      user_data)      : Run Last</pre>
<p>
The ::preedit-start signal is emitted when a new preediting sequence
starts.</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>context</code></em> :</span></p></td>
<td> the object on which the signal is emitted
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>user_data</code></em> :</span></p></td>
<td>user data set when the signal handler was connected.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="GtkIMContext-retrieve-surrounding"></a><h3>The <code class="literal">"retrieve-surrounding"</code> signal</h3>
<pre class="programlisting"><a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gboolean"
>gboolean</a>            user_function                      (<a class="link" href="GtkIMContext.html" title="GtkIMContext">GtkIMContext</a> *context,
                                                        <a
href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gpointer"
>gpointer</a>      user_data)      : Run Last</pre>
<p>
The ::retrieve-surrounding signal is emitted when the input method
requires the context surrounding the cursor.  The callback should set
the input method surrounding context by calling the
<a class="link" href="GtkIMContext.html#gtk-im-context-set-surrounding" title="gtk_im_context_set_surrounding ()"><code class="function">gtk_im_context_set_surrounding()</code></a> method.</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>context</code></em> :</span></p></td>
<td> the object on which the signal is emitted
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>user_data</code></em> :</span></p></td>
<td>user data set when the signal handler was connected.</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> <a
href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE--CAPS"
><code class="literal">TRUE</code></a> if the signal was handled.
</td>
</tr>
</tbody>
</table></div>
</div>
</div>
</div>
<div class="footer">
<hr>
          Generated by GTK-Doc V1.11</div>
</body>
</html>
